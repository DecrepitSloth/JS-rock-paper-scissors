<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Rock, Paper, Scissors</title>
</head>

<body>

    <script>

        /*Computers choices*/
        
        function getComputerChoice() {
            if (Math.round(Math.random() * 30) <= 9) {
                return("Paper");
            } else if (Math.round(Math.random() * 30) >= 20) {
                return("Rock");
            } else {
                return("Scissors");
            }
        }

        /*let player choose rock, paper, or scissor; case sensitive*/

        function fixLetters() {
            let x = prompt("Choice")

            remainderLetters = x.substring(1);
            let lower = remainderLetters.toLowerCase();

            firstLetter = x.substr(0, 1);
            let upper = firstLetter.toUpperCase();

            return upper.concat(lower);
        }

        /* second half*/ 

        function playerSelection() {
            let answer = fixLetters();
            if (answer == "Rock") {
                return("Rock");
            } else if (answer == "Paper") {
                return("Paper");
            } else if (answer == "Scissors") {
                return("Scissors");
            } else {
                return("Sorry, Try Again");
            }
        }

        /*play the game against computer*/
        
        function playRound(playerSelection, getComputerChoice) {
            let a = getComputerChoice();
            let b = playerSelection();

            if (a == "Rock" && b == "Paper") {
                return("Win"); 
            } else if (a == "Scissors" && b == "Rock") {
                return("Win"); 
            } else if (a == "Paper" && b == "Scissors") {
                return("Win");
            } else if (a == b) {
                return("Tie")
            } else {
                return("Lose");
            }
        }


        /*play for the best 3 out of 5 */

        let wins = 0;
        let losses = 0;
        let draws = 0;


        function game() {
            for (let i = 0; i < 5; i++) {
                let a = playRound(playerSelection, getComputerChoice);
                if (a == "Win") {
                    ++wins;
                    console.log(i, "Win");
                } else if (a == "Lose") {
                    ++losses;
                    console.log(i, "Lose");
                } else {
                    ++draws;
                    console.log(i, "Tie");
                }

                /* score tally */

                if (wins == 3) {
                    alert("You Win!");
                    resest();
                    break;
                } else if (losses == 3) {
                    alert("You Lose!");
                    reset();
                    break;
                } else if (draws == 3 || i == 4) {
                    alert("Draw");
                    reset();
                    break;
                }

                function reset() {
                    wins = 0;
                    losses = 0;
                    draws = 0;
                }
            }
        }

        /*declare the winner with a popup when there have been 3 wins*/

    </script>


</body>

</html>