<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <title>JavaScript Rock, Paper, Scissors</title>
</head>

<body>

    <!-- Add buttons for each  -->

    <button class ="Rock" onclick="game('Rock')">Rock</button>
    <button class="Paper" onclick="game('Paper')">Paper</button>
    <button class="Scissors" onclick="game('Scissors')">Scissor</button>
    
    <div class="scoreboard">
        <h3>Wins:
            <div class="wins"></div>
        </h3>

        <h3>Losses:
            <div class="losses"></div>
        </h3>

        <h3>Draws:
            <div class="draws"></div>
        </h3>
    </div>

    <script>

        /* Computers choices */
        
        function getComputerChoice() {
            if (Math.round(Math.random() * 30) <= 9) {
                return("Paper");
            } else if (Math.round(Math.random() * 30) >= 20) {
                return("Rock");
            } else {
                return("Scissors");
            }
        };

        /* Base values for scoreboard */
        
            let wins = 0;
            let losses = 0;
            let draws = 0;

        /* play a round against computer */
        
        function playRound(x, getComputerChoice) {
            let a = getComputerChoice();
            let b = x;

            if (a == "Rock" && b == "Paper") {
                document.querySelector('.wins').innerHTML = ++wins;
            } else if (a == "Scissors" && b == "Rock") {
                document.querySelector('.wins').innerHTML = ++wins;
            } else if (a == "Paper" && b == "Scissors") {
                document.querySelector('.wins').innerHTML = ++wins;
            } else if (a == b) {
                document.querySelector('.draws').innerHTML = ++draws;
            } else {
                document.querySelector('.losses').innerHTML = ++losses;
            }
        };
        
        /* play the game up to the best 3 out of 5. End game once the limit is reached */

        function game(x) {
            document.querySelector('.wins').innerHTML = wins;
            document.querySelector('.losses').innerHTML = losses;
            document.querySelector('.draws').innerHTML = draws;
            playRound(x, getComputerChoice);
            
            function reset(){
                if ((wins == 3) || (losses == 3) || (draws == 3)) {
                    (wins = 0) || (document.querySelector('.wins').innerHTML = wins);
                    (losses = 0) || (document.querySelector('.losses').innerHTML = losses);
                    (draws = 0) || (document.querySelector('.draws').innerHTML = draws);
                }};

            function endGame() {
                alert(endText);
                reset();
            }

            if (wins == 3) {
                endText = "You Win!";
                setTimeout(endGame, 100);
            } else if (losses == 3) {
                endText = "You Lose";
                setTimeout(endGame, 100); 
            } else if (draws == 3) {
                endText = "Tie";
                setTimeout(endGame, 100);
            }};
    </script>


</body>

</html>